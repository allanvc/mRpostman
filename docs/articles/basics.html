<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>mRpostman Basics • mRpostman</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="mRpostman Basics">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mRpostman</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basics.html">mRpostman Basics</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>mRpostman Basics</h1>
            
      
      
      <div class="hidden name"><code>basics.Rmd</code></div>

    </div>

    
    
<!-- This document must be rendered in RStudio using the option "knitr with parameters" or rmarkdown::render("MyDocument.Rmd", params = list(password = "my_password")) if we want to see the results-->
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p><strong>mRpostman</strong> makes extensive use of ‘curl’ and ‘libcurl’ capabilities, providing functions for mailboxes and electronic messages manipulation. Beyond many other functionalities, it is possible to move, delete, search and fetch messages or its parts using specific criteria.</p>
<p>In this vignette, we present all available functions of this package, but not all the possibilities one can explore.</p>
</div>
<div id="allowing-less-secure-apps-access" class="section level2">
<h2 class="hasAnchor">
<a href="#allowing-less-secure-apps-access" class="anchor"></a>Allowing Less Secure Apps Access</h2>
<p>Before using <strong>mRpostman</strong>, it is essential to configure your mail account. Many mail providers today require authorizing <strong>“less secure apps”</strong> to access your account from a third part app.</p>
<p>See <strong>README.md</strong> for more details on <em>Allowing Less Secure Apps Access</em>.</p>
</div>
<div id="package-structure" class="section level2">
<h2 class="hasAnchor">
<a href="#package-structure" class="anchor"></a>Package Structure</h2>
<p>The package is divided in 8 groups of functions:</p>
<ul>
<li>
<strong>configuration</strong>: <code><a href="../reference/configure_imap.html">configure_imap()</a></code>;</li>
<li>
<strong>mailboxes commands</strong>: <code><a href="../reference/list_mailboxes.html">list_mailboxes()</a></code>, <code><a href="../reference/select_mailbox.html">select_mailbox()</a></code>, <code><a href="../reference/examine_mailbox.html">examine_mailbox()</a></code>, <code><a href="../reference/rename_mailbox.html">rename_mailbox();</a></code>
</li>
<li>
<strong>options listing</strong>: <code><a href="../reference/list_server_capabilities.html">list_server_capabilities()</a></code>,<code><a href="../reference/flag_options.html">flag_options()</a></code>, <code><a href="../reference/section_or_field_options.html">section_or_field_options()</a></code>, <code><a href="../reference/metadata_options.html">metadata_options()</a></code>;</li>
<li>
<strong>search</strong>: <code><a href="../reference/search_before.html">search_before()</a></code>, <code><a href="../reference/search_since.html">search_since()</a></code>, <code><a href="../reference/search_period.html">search_period()</a></code>, <code><a href="../reference/search_on.html">search_on()</a></code>, <code><a href="../reference/search_sent_before.html">search_sent_before()</a></code>,<code><a href="../reference/search_sent_since.html">search_sent_since()</a></code>, <code><a href="../reference/search_sent_period.html">search_sent_period()</a></code>, <code><a href="../reference/search_sent_on.html">search_sent_on()</a></code>, <code><a href="../reference/search_string.html">search_string()</a></code>, <code><a href="../reference/search_flag.html">search_flag()</a></code>, <code><a href="../reference/search_smaller_than.html">search_smaller_than()</a></code>, <code><a href="../reference/search_larger_than.html">search_larger_than()</a></code>, <code><a href="../reference/search_younger_than.html">search_younger_than()</a></code>, <code><a href="../reference/search_older_than.html">search_older_than()</a></code>;</li>
<li>
<strong>custom search and its helper functions</strong>: <code><a href="../reference/custom_search.html">custom_search()</a></code>;
<ul>
<li>relational operators functions: <code><a href="../reference/AND.html">AND()</a></code>, <code><a href="../reference/OR.html">OR()</a></code>;</li>
<li>criteria definition functions: <code><a href="../reference/before.html">before()</a></code>, <code><a href="../reference/since.html">since()</a></code>, <code><a href="../reference/on.html">on()</a></code>, <code><a href="../reference/sent_before.html">sent_before()</a></code>, <code><a href="../reference/sent_since.html">sent_since()</a></code>, <code><a href="../reference/sent_on.html">sent_on()</a></code>, <code><a href="../reference/string.html">string()</a></code>, <code><a href="../reference/flag.html">flag()</a></code>, <code><a href="../reference/smaller_than.html">smaller_than()</a></code>, <code><a href="../reference/larger_than.html">larger_than()</a></code>, <code><a href="../reference/younger_than.html">younger_than()</a></code>, <code><a href="../reference/older_than.html">older_than()</a></code>;</li>
</ul>
</li>
<li>
<strong>fetch</strong>: <code><a href="../reference/fetch_full_msg.html">fetch_full_msg()</a></code>, <code><a href="../reference/fetch_msg_header.html">fetch_msg_header()</a></code>, <code><a href="../reference/fetch_msg_text.html">fetch_msg_text()</a></code>, <code><a href="../reference/fetch_msg_metadata.html">fetch_msg_metadata()</a></code>;</li>
<li>
<strong>attachments</strong>: <code><a href="../reference/list_attachments.html">list_attachments()</a></code>, <code><a href="../reference/get_attachments.html">get_attachments()</a></code>;</li>
<li>
<strong>miscellania</strong>: <code><a href="../reference/copy_msg.html">copy_msg()</a></code>, <code><a href="../reference/get_min_id.html">get_min_id()</a></code>, <code><a href="../reference/get_max_id.html">get_max_id()</a></code>, <code><a href="../reference/delete_msg.html">delete_msg()</a></code>, <code><a href="../reference/expunge.html">expunge()</a></code>, <code><a href="../reference/add_flags.html">add_flags()</a></code>, <code><a href="../reference/remove_flags.html">remove_flags()</a></code>, <code><a href="../reference/replace_flags.html">replace_flags()</a></code>, <code><a href="../reference/move_msg.html">move_msg()</a></code>.</li>
</ul>
</div>
<div id="how-do-i-start" class="section level2">
<h2 class="hasAnchor">
<a href="#how-do-i-start" class="anchor"></a>How do I start?</h2>
</div>
<div id="configuration" class="section level2">
<h2 class="hasAnchor">
<a href="#configuration" class="anchor"></a>1) Configuration</h2>
<p>After enabling (if needed) “Non secure apps access” in your Mail provider, you have to configure your IMAP settings:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(mRpostman)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># IMAP settings</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Gmail</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">imapconf &lt;-<span class="st"> </span><span class="kw"><a href="../reference/configure_imap.html">configure_imap</a></span>(<span class="dt">url=</span><span class="st">"imaps://imap.gmail.com"</span>,</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">                           <span class="dt">username=</span><span class="st">"your_user"</span>,</a>
<a class="sourceLine" id="cb1-7" data-line-number="7">                           <span class="dt">password=</span>rstudioapi<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/rstudioapi/topics/askForPassword">askForPassword</a></span>()</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">                          )</a>
<a class="sourceLine" id="cb1-9" data-line-number="9"></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co"># Yahoo Mail</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11"><span class="co"># imapconf &lt;- configure_imap(url="imaps://imap.mail.yahoo.com/",</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co">#                           username="your_user",</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co">#                           password=rstudioapi::askForPassword()</span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#                           )</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co"># AOL Mail</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co"># imapconf &lt;- configure_imap(url="imaps://export.imap.aol.com/",</span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#                           username="your_user",</span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#                           password=rstudioapi::askForPassword()</span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#                           )</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co"># Yandex Mail</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co"># imapconf &lt;- configure_imap(url="imaps://imap.yandex.com",</span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#                           username="your_user",</span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#                           password=rstudioapi::askForPassword()</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#                           )</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co"># Outlook - Office 365</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co"># imapconf &lt;- configure_imap(url="imaps://outlook.office365.com",</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30"><span class="co">#                            username="your_user",</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31"><span class="co">#                            password=rstudioapi::askForPassword()</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32"><span class="co">#                           )</span></a>
<a class="sourceLine" id="cb1-33" data-line-number="33"></a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="co"># you can try another IMAP server and see if it works</span></a></code></pre></div>
<p>Another useful options are: <code>timeout_ms</code>, <code>verbose = TRUE</code>, <code>buffersize</code> and <code>fresh_connect = TRUE</code>. Further ‘curl’ options related to IMAP functionalities can be passed to <code><a href="../reference/configure_imap.html">configure_imap()</a></code>. See <code><a href="https://www.rdocumentation.org/packages/curl/topics/curl_options">curl::curl_options()</a></code>.</p>
</div>
<div id="mailbox-commands" class="section level2">
<h2 class="hasAnchor">
<a href="#mailbox-commands" class="anchor"></a>2) Mailbox Commands</h2>
<div id="listing-mailboxes" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-mailboxes" class="anchor"></a>2.1) Listing Mailboxes</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Listing</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/list_mailboxes.html">list_mailboxes</a></span>()</a></code></pre></div>
<p>From now on, you will have to select a mailbox to issue further commands.</p>
</div>
<div id="selecting-a-mailbox" class="section level3">
<h3 class="hasAnchor">
<a href="#selecting-a-mailbox" class="anchor"></a>2.2) Selecting a Mailbox</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="co"># be careful - case sensitive</span></a></code></pre></div>
</div>
<div id="examining-a-mailbox" class="section level3">
<h3 class="hasAnchor">
<a href="#examining-a-mailbox" class="anchor"></a>2.3) Examining a Mailbox</h3>
<p>Select a mailbox and count the number of existent and recent messages.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># be careful - case sensitive</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/examine_mailbox.html">examine_mailbox</a></span>()</a></code></pre></div>
</div>
<div id="renaming-a-mailbox" class="section level3">
<h3 class="hasAnchor">
<a href="#renaming-a-mailbox" class="anchor"></a>2.4) Renaming a Mailbox</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages"</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># be careful - case sensitive</span></a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/rename_mailbox.html">rename_mailbox</a></span>(<span class="dt">new_name =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/list_mailboxes.html">list_mailboxes</a></span>() <span class="co"># and list again to check</span></a></code></pre></div>
</div>
</div>
<div id="options-listing" class="section level2">
<h2 class="hasAnchor">
<a href="#options-listing" class="anchor"></a>3) Options Listing</h2>
<p>Before executing search and fetch commands, it is recommended to check which are your options regarding to flags, message’s section and fields, and you server capabilities as well.</p>
<div id="server-capabilities" class="section level3">
<h3 class="hasAnchor">
<a href="#server-capabilities" class="anchor"></a>3.1) Server capabilities</h3>
<p>Knowing you server capabilities is important when searching because you can execute an optimized search using “ESEARCH” extension. Also, if your server has the “WITHIN” extension, you can use <code><a href="../reference/search_younger_than.html">search_younger_than()</a></code> and <code><a href="../reference/search_older_than.html">search_older_than()</a></code> functions.</p>
<p>If your server provides “MOVE” capabilities, you can use <code><a href="../reference/move_msg.html">move_msg()</a></code> for moving messages between two mailboxes.</p>
<p>Note that Gmail does not provide the “WITHIN” extension.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/list_server_capabilities.html">list_server_capabilities</a></span>()</a></code></pre></div>
</div>
<div id="flag-options" class="section level3">
<h3 class="hasAnchor">
<a href="#flag-options" class="anchor"></a>3.2) Flag Options</h3>
<p>Flags work like tags attached to messages. You can check the options with:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/flag_options.html">flag_options</a></span>()</a></code></pre></div>
</div>
<div id="section-and-fields-options" class="section level3">
<h3 class="hasAnchor">
<a href="#section-and-fields-options" class="anchor"></a>3.2) Section and Fields Options</h3>
<p>To see which section and/or fields of a message you can specify in some searches or when fetching a message, use:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/section_or_field_options.html">section_or_field_options</a></span>()</a></code></pre></div>
</div>
<div id="metadata-options" class="section level3">
<h3 class="hasAnchor">
<a href="#metadata-options" class="anchor"></a>3.3) Metadata Options</h3>
<p>You can search for a specific content in a message’s metadata as well. Check your options:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw"><a href="../reference/metadata_options.html">metadata_options</a></span>()</a></code></pre></div>
</div>
</div>
<div id="search" class="section level2">
<h2 class="hasAnchor">
<a href="#search" class="anchor"></a>4) Search</h2>
<p>All search functions will return a list with an imapconf object and a “msg_id” vector containing the results from search. The first object will be important when you want to put all the commands in a chain and perform a fetch after searching for messages. In this case, you will need the IMAP configuration object (<code>imapconf</code>) and the message’s ids (<code>msg_id</code>).</p>
<p>If you do not want to return the <code>imapconf</code> object, but only the search results, you can set <code>return_imapconf = FALSE</code> in any of the search functions.</p>
<p>You can also <strong>NEGATE</strong> all search expressions by setting <code>negate = TRUE</code>.</p>
<p>If your server supports <strong>ESEARCH</strong>, use it. It will prevent your results from being stripped. With “ESEARCH”, the results will be condensed to groups of sequence similar to what R does. For instance, if your search returns 1000 results, it is better having condensed groups such as <code>1:10, 12, 23:27, ...</code> instead of a sequence of <code>1, 2, 3, 4, 5, 6, ..., 10, 12, 23, 24, 25, ...</code>. If you can’t use ESEARCH, or if your results are being stripped even with ESEARCH, you can try to increase your buffersize in <code><a href="../reference/configure_imap.html">configure_imap()</a></code> in order to avoid stripping. This is related to curl’s buffersize.</p>
<div id="search-by-date" class="section level3">
<h3 class="hasAnchor">
<a href="#search-by-date" class="anchor"></a>4.1) Search by Date</h3>
<p><code><a href="../reference/search_before.html">search_before()</a></code>, <code><a href="../reference/search_since.html">search_since()</a></code>, <code><a href="../reference/search_on.html">search_on()</a></code>, and <code><a href="../reference/search_period.html">search_period()</a></code> use internal date, which reflects the moment when the message was received. <code><a href="../reference/search_sent_before.html">search_sent_before()</a></code>, <code><a href="../reference/search_sent_since.html">search_sent_since()</a></code>, <code><a href="../reference/search_sent_on.html">search_sent_on()</a></code>, and <code><a href="../reference/search_sent_period.html">search_sent_period()</a></code> use RFC-2822 date header (origination date), which “specifies the date and time at which the creator of the message indicated that the message was complete and ready to enter the mail delivery system” (Resnick, 2008). Dates in both methods must be the same most of time. Nonetheless, using internal date for search is faster (Babcock, 2016).</p>
<div id="by-internal-date" class="section level4">
<h4 class="hasAnchor">
<a href="#by-internal-date" class="anchor"></a>4.1.1) By internal date</h4>
</div>
<div id="before-a-date" class="section level4">
<h4 class="hasAnchor">
<a href="#before-a-date" class="anchor"></a>4.1.1.1) Before a date</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">result &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"17-Apr-2019"</span>, <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">result<span class="op">$</span>msg_id</a></code></pre></div>
<p>You can use UID (unique identifier) instead of MSN (message sequence number) and a flag also.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">result &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"02-May-2019"</span>, </a>
<a class="sourceLine" id="cb11-4" data-line-number="4">                <span class="dt">by =</span> <span class="st">"UID"</span>, </a>
<a class="sourceLine" id="cb11-5" data-line-number="5">                <span class="dt">flag =</span> <span class="st">"UNANSWERED"</span>,</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">                <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7"></a>
<a class="sourceLine" id="cb11-8" data-line-number="8">result<span class="op">$</span>msg_id</a></code></pre></div>
<p>Remember, if you do not want to return the <code>imapconf</code> object, but only the search results, you can set <code>return_imapconf = FALSE</code> in any of the search functions.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">result &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"02-May-2019"</span>, </a>
<a class="sourceLine" id="cb12-4" data-line-number="4">                <span class="dt">by =</span> <span class="st">"UID"</span>, </a>
<a class="sourceLine" id="cb12-5" data-line-number="5">                <span class="dt">flag =</span> <span class="st">"UNANSWERED"</span>,</a>
<a class="sourceLine" id="cb12-6" data-line-number="6">                <span class="dt">esearch =</span> <span class="ot">TRUE</span>, <span class="dt">return_imapconf =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"></a>
<a class="sourceLine" id="cb12-8" data-line-number="8">result</a></code></pre></div>
<p>You can also <strong>NEGATE</strong> the statement to search for messages <strong>NOT BEFORE a date</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"02-May-2019"</span>, </a>
<a class="sourceLine" id="cb13-4" data-line-number="4">                <span class="dt">negate =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb13-5" data-line-number="5">                <span class="dt">by =</span> <span class="st">"UID"</span>, </a>
<a class="sourceLine" id="cb13-6" data-line-number="6">                <span class="dt">flag =</span> <span class="st">"UNANSWERED"</span>,</a>
<a class="sourceLine" id="cb13-7" data-line-number="7">                <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8"></a>
<a class="sourceLine" id="cb13-9" data-line-number="9">results<span class="op">$</span>msg_id</a></code></pre></div>
</div>
<div id="since-a-date" class="section level4">
<h4 class="hasAnchor">
<a href="#since-a-date" class="anchor"></a>4.1.1.2) Since a date</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"17-Apr-2019"</span>,</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">               <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="by-period" class="section level4">
<h4 class="hasAnchor">
<a href="#by-period" class="anchor"></a>4.1.1.3) By period</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_period.html">search_period</a></span>(<span class="dt">since_date_char =</span> <span class="st">"02-Jan-2019"</span>,</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">                <span class="dt">before_date_char =</span> <span class="st">"30-Jun-2019"</span>,</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">                <span class="dt">flag =</span> <span class="st">"ANSWERED"</span>,</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">                <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>You can <strong>NEGATE</strong> period searches too:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_period.html">search_period</a></span>(<span class="dt">since_date_char =</span> <span class="st">"17-Jun-2019"</span>,</a>
<a class="sourceLine" id="cb16-4" data-line-number="4">                <span class="dt">before_date_char =</span> <span class="st">"30-Jun-2019"</span>, </a>
<a class="sourceLine" id="cb16-5" data-line-number="5">                <span class="dt">negate =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb16-6" data-line-number="6">                <span class="dt">flag =</span> <span class="st">"ANSWERED"</span>,</a>
<a class="sourceLine" id="cb16-7" data-line-number="7">                <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="on-a-specific-date" class="section level4">
<h4 class="hasAnchor">
<a href="#on-a-specific-date" class="anchor"></a>4.1.1.4) On a specific date</h4>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb17-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_on.html">search_on</a></span>(<span class="dt">date_char =</span> <span class="st">"30-Apr-2019"</span>, </a>
<a class="sourceLine" id="cb17-4" data-line-number="4">            <span class="dt">flag =</span> <span class="st">"SEEN"</span>,</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">            <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="by-origination-date" class="section level4">
<h4 class="hasAnchor">
<a href="#by-origination-date" class="anchor"></a>4.1.2) By origination date</h4>
</div>
<div id="sent-before-a-date" class="section level4">
<h4 class="hasAnchor">
<a href="#sent-before-a-date" class="anchor"></a>4.1.2.1) Sent Before a date</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_before.html">search_sent_before</a></span>(<span class="dt">date_char =</span> <span class="st">"17-Apr-2019"</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"></a>
<a class="sourceLine" id="cb18-5" data-line-number="5">results<span class="op">$</span>msg_id</a></code></pre></div>
<p>You can use UID (unique identifier) instead of MSN (message sequence number) and a flag also.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_before.html">search_sent_before</a></span>(<span class="dt">date_char =</span> <span class="st">"02-Jan-2019"</span>, </a>
<a class="sourceLine" id="cb19-4" data-line-number="4">                     <span class="dt">by =</span> <span class="st">"UID"</span>, </a>
<a class="sourceLine" id="cb19-5" data-line-number="5">                     <span class="dt">flag =</span> <span class="st">"UNANSWERED"</span>,</a>
<a class="sourceLine" id="cb19-6" data-line-number="6">                     <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>You can also <strong>NEGATE</strong> the statement to search for messages <strong>NOT SENTBEFORE a date</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_before.html">search_sent_before</a></span>(<span class="dt">date_char =</span> <span class="st">"02-May-2019"</span>, </a>
<a class="sourceLine" id="cb20-4" data-line-number="4">                     <span class="dt">negate =</span> <span class="ot">TRUE</span>, </a>
<a class="sourceLine" id="cb20-5" data-line-number="5">                     <span class="dt">by =</span> <span class="st">"UID"</span>, </a>
<a class="sourceLine" id="cb20-6" data-line-number="6">                     <span class="dt">flag =</span> <span class="st">"UNANSWERED"</span>,</a>
<a class="sourceLine" id="cb20-7" data-line-number="7">                     <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="sent-since-a-date" class="section level4">
<h4 class="hasAnchor">
<a href="#sent-since-a-date" class="anchor"></a>4.1.2.2) Sent Since a date</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb21-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_since.html">search_sent_since</a></span>(<span class="dt">date_char =</span> <span class="st">"17-Apr-2019"</span>)</a></code></pre></div>
</div>
<div id="sent-by-period" class="section level4">
<h4 class="hasAnchor">
<a href="#sent-by-period" class="anchor"></a>4.1.2.3) Sent by period</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_period.html">search_sent_period</a></span>(<span class="dt">since_date_char =</span> <span class="st">"17-Jun-2019"</span>,</a>
<a class="sourceLine" id="cb22-4" data-line-number="4">                     <span class="dt">before_date_char =</span> <span class="st">"30-Jun-2019"</span>,</a>
<a class="sourceLine" id="cb22-5" data-line-number="5">                     <span class="dt">flag =</span> <span class="st">"ANSWERED"</span>)</a></code></pre></div>
<p>You can <strong>NEGATE</strong> period searches too:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb23-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_period.html">search_sent_period</a></span>(<span class="dt">since_date_char =</span> <span class="st">"17-Jun-2019"</span>,</a>
<a class="sourceLine" id="cb23-4" data-line-number="4">                     <span class="dt">before_date_char =</span> <span class="st">"30-Jun-2019"</span>, </a>
<a class="sourceLine" id="cb23-5" data-line-number="5">                     <span class="dt">negate =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb23-6" data-line-number="6">                     <span class="dt">flag =</span> <span class="st">"ANSWERED"</span>)</a></code></pre></div>
</div>
<div id="sent-on-a-specific-date" class="section level4">
<h4 class="hasAnchor">
<a href="#sent-on-a-specific-date" class="anchor"></a>4.1.2.4) Sent On a specific date</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_sent_on.html">search_sent_on</a></span>(<span class="dt">date_char =</span> <span class="st">"30-Apr-2019"</span>, </a>
<a class="sourceLine" id="cb24-4" data-line-number="4">                 <span class="dt">flag =</span> <span class="st">"SEEN"</span>,</a>
<a class="sourceLine" id="cb24-5" data-line-number="5">                 <span class="dt">esearch =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
</div>
<div id="search-by-string" class="section level3">
<h3 class="hasAnchor">
<a href="#search-by-string" class="anchor"></a>4.2) Search by String</h3>
<p>You can search for a simple or compound string either in the whole message, in a section, or in a specific header field. You can also <strong>NEGATE</strong> the statement and search for messages (or specific part of a message) not containing that string.</p>
<p>When searching by string, it is not possible to use flags.</p>
<p>Searching “TO” field:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_string.html">search_string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"TO"</span>, <span class="dt">string =</span> <span class="st">"hadley@rstudio.com"</span>,</a>
<a class="sourceLine" id="cb25-4" data-line-number="4">                <span class="dt">negate =</span> <span class="ot">TRUE</span>) <span class="co"># not TO "hadley@rstudio.com"</span></a>
<a class="sourceLine" id="cb25-5" data-line-number="5"></a>
<a class="sourceLine" id="cb25-6" data-line-number="6">results<span class="op">$</span>msg_id</a></code></pre></div>
<p>Searching “TEXT” section.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_string.html">search_string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"TEXT"</span>, <span class="dt">string =</span> <span class="st">"Dear Allan"</span>)</a></code></pre></div>
<p>To search for the string in the whole message, use <code>section_or_field = "BODY"</code>.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb27-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_string.html">search_string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"BODY"</span>, <span class="dt">string =</span> <span class="st">"Dear Allan"</span>)</a></code></pre></div>
<p>Check <code>section_or_fields_options()</code> to see which fields and sections you can specify.</p>
</div>
<div id="search-by-flag" class="section level3">
<h3 class="hasAnchor">
<a href="#search-by-flag" class="anchor"></a>4.3) Search by Flag</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb28-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_flag.html">search_flag</a></span>(<span class="dt">flag =</span> <span class="st">"RECENT"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>)</a></code></pre></div>
<p>Check <code><a href="../reference/flag_options.html">flag_options()</a></code> to see which flags you can specify.</p>
</div>
<div id="search-by-size" class="section level3">
<h3 class="hasAnchor">
<a href="#search-by-size" class="anchor"></a>4.4) Search by Size</h3>
<p>The size is specified in bytes.</p>
<div id="smaller-than" class="section level4">
<h4 class="hasAnchor">
<a href="#smaller-than" class="anchor"></a>4.4.1) Smaller Than</h4>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_smaller_than.html">search_smaller_than</a></span>(<span class="dt">size =</span> <span class="dv">512000</span>) <span class="co"># smaller than 512KB</span></a></code></pre></div>
</div>
<div id="larger-than" class="section level4">
<h4 class="hasAnchor">
<a href="#larger-than" class="anchor"></a>4.4.1) Larger Than</h4>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb30-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_larger_than.html">search_larger_than</a></span>(<span class="dt">size =</span> <span class="dv">512000</span>, <span class="dt">esearch =</span> <span class="ot">TRUE</span>) <span class="co"># Larger than 512KB</span></a></code></pre></div>
</div>
</div>
<div id="search-by-within-extension" class="section level3">
<h3 class="hasAnchor">
<a href="#search-by-within-extension" class="anchor"></a>4.5) Search by Within Extension</h3>
<p>Severs who support “WITHIN” EXTENSION enable searching for messages within a span of time, i.e. younger than “x” seconds, or older than “x” seconds.</p>
<div id="younger-than" class="section level4">
<h4 class="hasAnchor">
<a href="#younger-than" class="anchor"></a>4.5.1) Younger Than</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_younger_than.html">search_younger_than</a></span>(<span class="dt">seconds =</span> <span class="dv">3600</span>) <span class="co"># msgs received in less than one hour (3600 sec)</span></a></code></pre></div>
</div>
<div id="older-than" class="section level4">
<h4 class="hasAnchor">
<a href="#older-than" class="anchor"></a>4.5.2) Older Than</h4>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_older_than.html">search_older_than</a></span>(<span class="dt">seconds =</span> <span class="dv">3600</span>) <span class="co"># msgs received in not less than one hour (3600 sec)</span></a></code></pre></div>
</div>
</div>
</div>
<div id="custom-search" class="section level2">
<h2 class="hasAnchor">
<a href="#custom-search" class="anchor"></a>5) Custom Search</h2>
<p><code><a href="../reference/custom_search.html">custom_search()</a></code> and its <strong>helper functions</strong> allow you to create a vast number of customized search by combining different criteria using all the types of searches presented before.</p>
<p>These are the helper functions you can use inside <code><a href="../reference/custom_search.html">custom_search()</a></code>:</p>
<ol style="list-style-type: decimal">
<li>Relational operators: <code><a href="../reference/AND.html">AND()</a></code>, and <code><a href="../reference/OR.html">OR()</a></code>;</li>
<li>Criteria definition: <code><a href="../reference/before.html">before()</a></code>, <code><a href="../reference/since.html">since()</a></code>, <code><a href="../reference/on.html">on()</a></code>, <code><a href="../reference/sent_before.html">sent_before()</a></code>, <code><a href="../reference/sent_since.html">sent_since()</a></code>, <code><a href="../reference/sent_on.html">sent_on()</a></code>, <code><a href="../reference/string.html">string()</a></code>, <code><a href="../reference/flag.html">flag()</a></code>, <code><a href="../reference/smaller_than.html">smaller_than()</a></code>, <code><a href="../reference/larger_than.html">larger_than()</a></code>, <code><a href="../reference/younger_than.html">younger_than()</a></code>, and <code><a href="../reference/older_than.html">older_than()</a></code>.</li>
</ol>
<p>NOTE: IMAP queries follows Polish notation, i.e. operators such as <code>OR</code> come before arguments, e.g. “OR argument1 argument2”. Therefore, the relational operators functions in this package should be used like the following examples: <code><a href="../reference/OR.html">OR(before("17-Apr-2015"), string("FROM", "Jim"))</a></code>. Even though there is no “AND” operator in IMAP, this package adds a helper funcion <code><a href="../reference/AND.html">AND()</a></code> to indicate multiples arguments that must be searched together, e.g. <code><a href="../reference/AND.html">AND(since("01-Jul-2018"), larger_than(16000))</a></code>.</p>
<p>Example 1: Searching for messages containing the string “toronto” in the “FROM” field <strong>AND</strong> that were received before “12-Apr-2019”.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/custom_search.html">custom_search</a></span>(<span class="dt">custom_request =</span> </a>
<a class="sourceLine" id="cb33-4" data-line-number="4">                 <span class="kw"><a href="../reference/AND.html">AND</a></span>(</a>
<a class="sourceLine" id="cb33-5" data-line-number="5">                   <span class="kw"><a href="../reference/string.html">string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"FROM"</span>, <span class="dt">string =</span> <span class="st">"Toronto"</span>),</a>
<a class="sourceLine" id="cb33-6" data-line-number="6">                   <span class="kw"><a href="../reference/before.html">before</a></span>(<span class="dt">date_char =</span> <span class="st">"12-Apr-2019"</span>)</a>
<a class="sourceLine" id="cb33-7" data-line-number="7">                   )</a>
<a class="sourceLine" id="cb33-8" data-line-number="8">               )</a>
<a class="sourceLine" id="cb33-9" data-line-number="9"></a>
<a class="sourceLine" id="cb33-10" data-line-number="10">results<span class="op">$</span>msg_id</a></code></pre></div>
<p>Example 2: Searching for messages containing the string “Contract 2872827” in the “TEXT” section <strong>OR</strong> the string “Buying operation” in the “Subject” field of the “HEADER”.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb34-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/custom_search.html">custom_search</a></span>(<span class="dt">custom_request =</span> </a>
<a class="sourceLine" id="cb34-4" data-line-number="4">                 <span class="kw"><a href="../reference/OR.html">OR</a></span>(</a>
<a class="sourceLine" id="cb34-5" data-line-number="5">                   <span class="kw"><a href="../reference/string.html">string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"TEXT"</span>, <span class="dt">string =</span> <span class="st">"Contract 2872827"</span>),</a>
<a class="sourceLine" id="cb34-6" data-line-number="6">                   <span class="kw"><a href="../reference/string.html">string</a></span>(<span class="dt">section_or_field =</span> <span class="st">"Subject"</span>, <span class="dt">string =</span> <span class="st">"Buying operation"</span>)</a>
<a class="sourceLine" id="cb34-7" data-line-number="7">                   )</a>
<a class="sourceLine" id="cb34-8" data-line-number="8">               )</a>
<a class="sourceLine" id="cb34-9" data-line-number="9"></a>
<a class="sourceLine" id="cb34-10" data-line-number="10">results<span class="op">$</span>msg_id</a></code></pre></div>
</div>
<div id="fetch" class="section level2">
<h2 class="hasAnchor">
<a href="#fetch" class="anchor"></a>6) Fetch</h2>
<p>You can fetch full messages, message headers, message texts, or only metadata field(s) of messages.</p>
<p>We usually fetch messages after a search. Given the output of search functions in <strong>mRpostman</strong>, you will have to use the <strong>exposition pipe</strong> <code>%$%</code> in order to retrieve and correctly map the <code>imapconf</code> object and the <code>msg_id</code> (search results).</p>
<p>You can also choose to write fetch results to disk (working directory) using <code>write_to_file = TRUE</code>. If you choose to do so, <strong>mRpostman</strong> creates a folder with the mailbox name in your wd and save the parts of the messages you are fetching to text files using each message sequence number (MSN) or unique identifier (UID) as names.</p>
<div id="fetch-full-message" class="section level3">
<h3 class="hasAnchor">
<a href="#fetch-full-message" class="anchor"></a>6.1) Fetch Full Message</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb35-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"10-Mar-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_full_msg.html">fetch_full_msg</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id,</a>
<a class="sourceLine" id="cb35-5" data-line-number="5">                 <span class="dt">by=</span><span class="st">"UID"</span>, <span class="dt">write_to_file =</span> <span class="ot">TRUE</span>, <span class="dt">keep_in_mem =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb35-6" data-line-number="6">                 <span class="dt">partial =</span> <span class="st">"0.789"</span>)</a></code></pre></div>
<p>Do not forget to re-specify <code>by = "UID"</code> inside <code><a href="../reference/fetch_full_msg.html">fetch_full_msg()</a></code>.</p>
<p><strong>IMPORTANT:</strong> Some servers may require larger <code>timeout_ms</code> parameter inside <code><a href="../reference/configure_imap.html">configure_imap()</a></code> in order to successfully fetch your messages. This is particularly important when your messages have large attachments, which can sensibly increase the fetching time.</p>
</div>
<div id="fetch-message-header" class="section level3">
<h3 class="hasAnchor">
<a href="#fetch-message-header" class="anchor"></a>6.2) Fetch Message Header</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"Kansas State University"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"15-Aug-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb36-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_msg_header.html">fetch_msg_header</a></span>(<span class="dt">imapconf =</span> imapconf, </a>
<a class="sourceLine" id="cb36-5" data-line-number="5">                   <span class="dt">msg_id =</span> msg_id, </a>
<a class="sourceLine" id="cb36-6" data-line-number="6">                   <span class="dt">fields =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"DATE"</span>, <span class="st">"SUBJECT"</span>),</a>
<a class="sourceLine" id="cb36-7" data-line-number="7">                   <span class="dt">by =</span> <span class="st">"UID"</span>)</a>
<a class="sourceLine" id="cb36-8" data-line-number="8"></a>
<a class="sourceLine" id="cb36-9" data-line-number="9">results</a></code></pre></div>
</div>
<div id="fetch-message-text" class="section level3">
<h3 class="hasAnchor">
<a href="#fetch-message-text" class="anchor"></a>6.3) Fetch Message Text</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"17-Aug-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_msg_text.html">fetch_msg_text</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">by =</span> <span class="st">"UID"</span>, <span class="dt">try_b64decode =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</div>
<div id="fetch-message-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#fetch-message-metadata" class="anchor"></a>6.4) Fetch Message Metadata</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_on.html">search_on</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb38-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_msg_metadata.html">fetch_msg_metadata</a></span>(imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">by =</span> <span class="st">"UID"</span>,</a>
<a class="sourceLine" id="cb38-5" data-line-number="5">                     <span class="dt">metadata =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"INTERNALDATE"</span>, <span class="st">"UID"</span>, <span class="st">"ENVELOPE"</span>))</a></code></pre></div>
<p>You can check metadata options with <code><a href="../reference/metadata_options.html">metadata_options()</a></code>.</p>
</div>
</div>
<div id="attachments" class="section level2">
<h2 class="hasAnchor">
<a href="#attachments" class="anchor"></a>7) Attachments</h2>
<p><strong>After fetching full messages</strong>, it is possible to list and get the attachments of those messages.</p>
<p><code><a href="../reference/fetch_full_msg.html">fetch_full_msg()</a></code> will return a list with the full message content, i.e. header, text, and attachments. You can access this content and list or get/save the attachments from each message with the following functions.</p>
<p><strong>IMPORTANT:</strong> you <strong>cannot</strong> set <code>keep_in_mem = FALSE</code> in <code><a href="../reference/fetch_full_msg.html">fetch_full_msg()</a></code> if you intend to list or get attachments after fetching your messages.</p>
<div id="listing-attachments" class="section level3">
<h3 class="hasAnchor">
<a href="#listing-attachments" class="anchor"></a>7.1) Listing Attachments</h3>
<p>This will list your attachments filenames for each fetched message.</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"23-Sep-2019"</span>) <span class="op">%$%</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_full_msg.html">fetch_full_msg</a></span>(imapconf, <span class="dt">msg_id=</span>msg_id, <span class="dt">write_to_disk =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/list_attachments.html">list_attachments</a></span>()</a></code></pre></div>
</div>
<div id="getting-attachments" class="section level3">
<h3 class="hasAnchor">
<a href="#getting-attachments" class="anchor"></a>7.1) Getting Attachments</h3>
<p><code><a href="../reference/get_attachments.html">get_attachments()</a></code> will try to convert base64 text inside your message to the appropriate file extension. This will create a folder with the selected mailbox in your working directory. Inside it, you will have other folders with the respective message sequence number (MSN) or unique id (UID), e.g.: msgMSN8 or msgUID8, and the attachment(s) inside it.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1">imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"23-Sep-2019"</span>) <span class="op">%$%</span></a>
<a class="sourceLine" id="cb40-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/fetch_full_msg.html">fetch_full_msg</a></span>(imapconf, <span class="dt">msg_id=</span>msg_id, <span class="dt">write_to_disk =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb40-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/get_attachments.html">get_attachments</a></span>()</a></code></pre></div>
<p>The result will be like this:</p>
<p><img src="figures/INBOX.png"></p>
<p><img src="figures/INBOX2.png"></p>
</div>
</div>
<div id="miscellanea" class="section level2">
<h2 class="hasAnchor">
<a href="#miscellanea" class="anchor"></a>8) Miscellanea</h2>
<p>Here we present other functions to perform useful IMAP operations.</p>
<div id="copy-messages" class="section level3">
<h3 class="hasAnchor">
<a href="#copy-messages" class="anchor"></a>8.1) Copy Message(s)</h3>
<p>Copying seach results form “CRAN messages2” to “INBOX” mailbox:</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb41-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2019"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb41-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/copy_msg.html">copy_msg</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">to_mbox =</span> <span class="st">"INBOX"</span>)</a></code></pre></div>
</div>
<div id="get-minimum-smaller-message-id-with-specific-flag" class="section level3">
<h3 class="hasAnchor">
<a href="#get-minimum-smaller-message-id-with-specific-flag" class="anchor"></a>8.2) Get minimum (smaller) message ID with specific flag</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Trash"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/get_min_id.html">get_min_id</a></span>(<span class="dt">flag =</span> <span class="st">"UNSEEN"</span>)</a></code></pre></div>
</div>
<div id="get-maximum-larger-message-id-with-specific-flag" class="section level3">
<h3 class="hasAnchor">
<a href="#get-maximum-larger-message-id-with-specific-flag" class="anchor"></a>8.3) Get maximum (larger) message ID with specific flag</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Trash"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb43-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/get_max_id.html">get_max_id</a></span>(<span class="dt">flag =</span> <span class="st">"UNSEEN"</span>)</a></code></pre></div>
</div>
<div id="delete-messages" class="section level3">
<h3 class="hasAnchor">
<a href="#delete-messages" class="anchor"></a>8.4) Delete message(s)</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Trash"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb44-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2012"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb44-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/delete_msg.html">delete_msg</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id)</a></code></pre></div>
<p>Deleting a specific “msg_id” without a previous search:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb45-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/delete_msg.html">delete_msg</a></span>(<span class="dt">msg_id =</span> <span class="dv">66128</span>)</a></code></pre></div>
</div>
<div id="expunge" class="section level3">
<h3 class="hasAnchor">
<a href="#expunge" class="anchor"></a>8.5) Expunge</h3>
<p>Expunges message(s) marked with the “DELETED” flag in a mailbox or a specific message using the <code>specific_UID</code> attribute.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Trash"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb46-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/delete_msg.html">delete_msg</a></span>(<span class="dt">msg_id =</span> <span class="dv">71171</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span></a>
<a class="sourceLine" id="cb46-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/expunge.html">expunge</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">specific_UID =</span> msg_id)</a></code></pre></div>
</div>
<div id="addremovereplace-flags" class="section level3">
<h3 class="hasAnchor">
<a href="#addremovereplace-flags" class="anchor"></a>8.6) Add/Remove/Replace Flags</h3>
<p>Adding, removing and replacing one or more flags to messages.</p>
<div id="add-flags" class="section level4">
<h4 class="hasAnchor">
<a href="#add-flags" class="anchor"></a>8.6.1) Add Flags</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"18-Aug-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/add_flags.html">add_flags</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">flags_to_set =</span> <span class="st">"RECENT"</span>)</a></code></pre></div>
<p>You cannot add a flag that is the antonym of an already existent flag in the message, e.g. cannot add “UNSEEN” flag when a message already has flag “SEEN”. Use <code><a href="../reference/replace_flags.html">replace_flags()</a></code> instead.</p>
</div>
<div id="remove-flags" class="section level4">
<h4 class="hasAnchor">
<a href="#remove-flags" class="anchor"></a>8.6.2) Remove Flags</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_since.html">search_since</a></span>(<span class="dt">date_char =</span> <span class="st">"18-Aug-2019"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/remove_flags.html">remove_flags</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">flags_to_unset =</span> <span class="st">"RECENT"</span>)</a></code></pre></div>
</div>
<div id="replace-flags" class="section level4">
<h4 class="hasAnchor">
<a href="#replace-flags" class="anchor"></a>8.6.3) Replace Flags</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb49-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"INBOX"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb49-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2012"</span>, <span class="dt">by =</span> <span class="st">"UID"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb49-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/replace_flags.html">replace_flags</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, </a>
<a class="sourceLine" id="cb49-5" data-line-number="5">               <span class="dt">flags_to_set =</span> <span class="dt">flags_to_set =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"SEEN"</span>, <span class="st">"DRAFT"</span>))</a></code></pre></div>
</div>
</div>
<div id="move-messages" class="section level3">
<h3 class="hasAnchor">
<a href="#move-messages" class="anchor"></a>8.7) Move Message(s)</h3>
<p><code><a href="../reference/move_msg.html">move_msg()</a></code> uses IMAP “MOVE” EXTENSION. Check if your server supports “MOVE” capability with <code><a href="../reference/list_server_capabilities.html">list_server_capabilities()</a></code>.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1"><span class="co"># copy search results from "Sent" to "INBOX"</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Sent Mail"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb50-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2012"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb50-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/move_msg.html">move_msg</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">to_mbox =</span> <span class="st">"CRAN messages2"</span>)</a></code></pre></div>
<p>If your server does not provide “MOVE” capability, the same result can be achieved with a combination of <code><a href="../reference/add_flags.html">add_flags()</a></code> and <code><a href="../reference/expunge.html">expunge()</a></code>:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">results &lt;-<span class="st"> </span>imapconf <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="../reference/select_mailbox.html">select_mailbox</a></span>(<span class="dt">mbox =</span> <span class="st">"[Gmail]/Sent Mail"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb51-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="../reference/search_before.html">search_before</a></span>(<span class="dt">date_char =</span> <span class="st">"10-may-2012"</span>) <span class="op">%$%</span><span class="st"> </span><span class="co">#exposition pipe operator</span></a>
<a class="sourceLine" id="cb51-4" data-line-number="4"><span class="st">  </span><span class="kw"><a href="../reference/copy_msg.html">copy_msg</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">to_mbox =</span> <span class="st">"CRAN messages2"</span>) <span class="op">%$%</span></a>
<a class="sourceLine" id="cb51-5" data-line-number="5"><span class="st">  </span><span class="kw"><a href="../reference/add_flags.html">add_flags</a></span>(<span class="dt">imapconf =</span> imapconf, <span class="dt">msg_id =</span> msg_id, <span class="dt">flags_to_set =</span> <span class="st">"Deleted"</span>) <span class="op">%$%</span></a>
<a class="sourceLine" id="cb51-6" data-line-number="6"><span class="st">  </span><span class="kw"><a href="../reference/expunge.html">expunge</a></span>()</a></code></pre></div>
</div>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Babcock, N., <em>Introduction to IMAP</em>, Blog, May 2016, <a href="https://nbsoftsolutions.com/blog/introduction-to-imap" class="uri">https://nbsoftsolutions.com/blog/introduction-to-imap</a>.</p>
<p>Crispin, M., <em>INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1</em>, RFC 3501, DOI: 10.17487/RFC3501, March 2003, <a href="https://www.rfc-editor.org/info/rfc3501" class="uri">https://www.rfc-editor.org/info/rfc3501</a>.</p>
<p>Ooms, J. <em>curl: A Modern and Flexible Web Client for R</em>. R package version 3.3, 2019, <a href="https://CRAN.R-project.org/package=curl" class="uri">https://CRAN.R-project.org/package=curl</a></p>
<p>Stenberg, D. <em>Libcurl - The Multiprotocol File Transfer Library</em>, <a href="https://curl.haxx.se/libcurl/" class="uri">https://curl.haxx.se/libcurl/</a></p>
<p>Freed, N. and N. Borenstein, <em>Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</em>, RFC 2046, DOI: 10.17487/RFC2046, November 1996, <a href="https://www.rfc-editor.org/info/rfc2046" class="uri">https://www.rfc-editor.org/info/rfc2046</a>.</p>
<p>Resnick, P., Ed., <em>Internet Message Format</em>, RFC 2822, DOI: 10.17487/RFC2822, April 2001, <a href="https://www.rfc-editor.org/info/rfc2822" class="uri">https://www.rfc-editor.org/info/rfc2822</a>.</p>
<p>Resnick, P., Ed., <em>Internet Message Format</em>, RFC 5322, DOI: 10.17487/RFC5322, October 2008, <a href="https://www.rfc-editor.org/info/rfc5322" class="uri">https://www.rfc-editor.org/info/rfc5322</a>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#allowing-less-secure-apps-access">Allowing Less Secure Apps Access</a></li>
      <li><a href="#package-structure">Package Structure</a></li>
      <li><a href="#how-do-i-start">How do I start?</a></li>
      <li><a href="#configuration">1) Configuration</a></li>
      <li><a href="#mailbox-commands">2) Mailbox Commands</a></li>
      <li><a href="#options-listing">3) Options Listing</a></li>
      <li><a href="#search">4) Search</a></li>
      <li><a href="#custom-search">5) Custom Search</a></li>
      <li><a href="#fetch">6) Fetch</a></li>
      <li><a href="#attachments">7) Attachments</a></li>
      <li><a href="#miscellanea">8) Miscellanea</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Allan Quadros.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
